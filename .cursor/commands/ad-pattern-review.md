{
  "name": "AD Pattern Review",
  "command": "ad pattern review",
  "prompt": "You are reviewing code for pattern adherence following the Accelerated Delivery Framework.\n\n---\n\n### STEP 1: Read Foundation Documents\n\n1. Read `docs/DESIGN_PATTERNS.md`:\n   - Understand all documented patterns\n   - Note: Repository Pattern, Unit of Work, DTO Pattern, DI, Service Layer\n   - Understand how each pattern is implemented\n\n2. Read `docs/PROJECT_STRUCTURE.md`:\n   - Understand folder structure\n   - Know where each type of file should be located\n   - Understand naming conventions\n\n---\n\n### STEP 2: Review Code/Files\n\nIdentify what to review:\n- Specific files (user provided)\n- Recent changes (git diff)\n- Entire feature/module\n- All files in a directory\n\nReview each file for:\n- Pattern compliance\n- File location correctness\n- Dependency injection\n- DTO usage\n- Repository pattern adherence\n- Service layer separation\n\n---\n\n### STEP 3: Check Compliance\n\nFor each file, verify:\n\n**Pattern Compliance**:\n- [ ] Follows Repository Pattern (if data access)\n- [ ] Uses Unit of Work (if transactions)\n- [ ] Uses DTOs for API contracts\n- [ ] Dependencies injected via constructor\n- [ ] Service layer has business logic\n- [ ] Controllers are thin (delegate to services)\n\n**File Location**:\n- [ ] Files in correct folders per PROJECT_STRUCTURE.md\n- [ ] Naming conventions followed\n- [ ] Folder structure matches architecture\n\n**Code Quality**:\n- [ ] Async/await used correctly\n- [ ] Error handling appropriate\n- [ ] No business logic in controllers\n- [ ] No direct database access in controllers\n- [ ] Proper separation of concerns\n\n---\n\n### STEP 4: Report Violations\n\nFor each violation found:\n\n1. **Violation Type**: [Pattern/Location/Quality]\n2. **File**: [file path]\n3. **Issue**: [description of violation]\n4. **Expected**: [what should be done]\n5. **Fix**: [how to fix it]\n\n---\n\n### STEP 5: Suggest Fixes\n\nFor each violation, provide:\n\n1. **Specific Fix**: Code changes needed\n2. **Pattern Reference**: Link to DESIGN_PATTERNS.md section\n3. **Example**: Show correct pattern usage\n4. **Priority**: High/Medium/Low\n\n---\n\n### OUTPUT FORMAT\n\nAfter review:\n\n```\n## Pattern Review Results\n\n✅ Compliance Score: [X]%\n\n✅ Compliant Files:\n- [List compliant files]\n\n⚠️ Violations Found: [count]\n\n### Violations:\n\n#### [File Path]\n- **Issue**: [description]\n- **Expected**: [what should be]\n- **Fix**: [how to fix]\n- **Priority**: [High/Medium/Low]\n\n### Summary:\n- Pattern compliance: [X]/[Y] files\n- File locations: [X]/[Y] correct\n- Code quality: [X]/[Y] files\n\n### Recommendations:\n- [Priority fixes needed]\n```\n\n---\n\n**Important Notes:**\n- Always read DESIGN_PATTERNS.md and PROJECT_STRUCTURE.md first\n- Check every file against patterns\n- Provide specific fixes, not just issues\n- Reference pattern documentation\n- Reference: `docs/ai-pod/common/accelerated-delivery-framework.md` (lines 405-416)"
}
